<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
	</head>
	<body>
		<a-scene
			mindar-image="imageTargetSrc: ./targets.mind; filterMinCF: 0.0001; filterBeta: 0.001; uiError: no; uiLoading: no; uiScanning: no;"
			vr-mode-ui="enabled: false"
			device-orientation-permission-ui="enabled: false"
		>
			<a-assets>
				<video id="video" src="videos/IMG_0150.mp4" loop></video>
			</a-assets>
			<a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
			<a-entity mindar-image-target="targetIndex: 0">
				<a-video
					src="#video"
					position="0 0 0"
					height="0.552"
					width="1"
					rotation="0 0 0"
				></a-video>
			</a-entity>
		</a-scene>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const video = document.querySelector("#video");
				const scene = document.querySelector("a-scene");
				const target = document.querySelector("[mindar-image-target]");

				target.addEventListener("targetFound", (event) => {
					video.play();
				});

				target.addEventListener("targetLost", (event) => {
					video.pause();
					video.currentTime = 0; // Reset video to start
				});

				scene.addEventListener("arError", (event) => {
					console.error("AR Error: ", event);
				});
			});
		</script>
	</body>
</html>
